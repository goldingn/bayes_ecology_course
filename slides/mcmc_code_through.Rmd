This document will be filled out with code to run MCMC on a model, just using R functions. The core parts are:

 * the likelihood function
 * the prior density function
 * the posterior density function
 * the MCMC sampler

## the problem

We'll be writing a model for the Polis logistic regression model. The JAGS version is in `H.LogisticRegPolis.Rmd`. Here's the data again:

```{r data}
data <- list(
  PA = c(15.41, 5.63, 25.92, 15.17, 13.04, 18.85, 30.95, 22.87, 12.01, 
         11.6, 6.09, 2.28, 4.05, 59.94, 63.16, 22.76, 23.54, 0.21, 2.55),
  Y = c(1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1)
)
```

The model looks like this in statistical notation:

$$
Y_i \sim Bernoulli(p_i) \\ 
logit(p_i) = a + b  \times \text{PA}_i
$$
and we use these priors (written with the *variance* not the precision):
$$
a \sim N(0, 10^6) \\ 
b \sim N(0, 10^6)
$$
The JAGS code looked like this:
```{r jags}
"
model
{
  a ~ dnorm(0, 1.0E-6)  # priors for regression coefficients
  b ~ dnorm(0, 1.0E-6)

  # for each of the 19 islands
  for (i in 1:19)
  {
    logit(p[i]) <- a + b * PA[i]   # calculate the probability of occupancy
    Y[i] ~ dbern(p[i])          # randomly draw the actual occupancy from a Bernoulli distribution
    # PA2[i] <- PA[i] - mean(PA[1:19])
  }
}
"
```

## the likelihood function

```{r likelihood}

```

## the prior density function

```{r prior}

```

## the posterior density function

```{r posterior}

```

## the MCMC algorithm

Specifically, this is for the random walk Metropolis-Hastings sampler

```{r proposal}

```


```{r acceptance}
accept <- function (lp_new, lp_old) {
  log_diff <- lp_new - lp_old
  log(runif(1)) < log_diff
}
```

```{r sampler}

```

## run the algorithm on the data

```{r get_samples}

```


